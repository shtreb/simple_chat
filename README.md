# Тестовое задание на замещение вакансии программиста-разработчика

> **Exemplis discimus** (*Мы учимся на примерах*)

## Цели задания

* Ввести разработчика в архитектуру разрабатываемых приложений
* Продемонстрировать способы решения стандартных задач с использованием применяемого в разработке набора инструментов
* Предоставить кандидатам, не имеющим опыта разработки на языке Dart, учебно-практические задания для быстрого входа в разработку
* Проверка знаний, умений и навыков кандидата по следующим направлениям:
  * самостоятельно добывать необходимые знания
  * самостоятельно находить решение
  * разбираться в коде
  * писать понятный код
  * ООП
  * паттерны проектирования
  * автоматизированное тестирование

## Предварительные указания

Для работы предоставляется приложение, реализующее простой чат, находящееся в начальной стадии разработки. В ходе работы необходимо:

1. Запустить предоставленное приложение
2. Изучить необходимые для выполнения работы материалы
4. Разобраться в коде и выполнить предложенное ТЗ на разработку функционала.
5. Самостоятельно сформулировать задачу по улучшению функционала и реализовать ее в коде
6. Предоставить отчет о проделанной работе вместе с кодом

## Запуск приложения

### Предварительные требования

Для запуска приложения необходимо:

* Установить на рабочем компьютере [Dart SDK](https://webdev.dartlang.org/tools/sdk#install) версии не ниже 2.0.0
* Для сборки мобильного приложения необходимо установить [Flutter](https://flutter.io/docs/get-started/install)
* Получить копию данного репозитория на своем рабочем компьютере
* Для запуска серверной части необходимо предварительно запустить сервер MongoDb так, чтобы к нему можно было подключиться на `localhost:27017`. Это можно сделать, либо [установив локально сервер MongoDb](https://docs.mongodb.com/manual/installation/), либо запустив сервер в [docker-контейнере](https://hub.docker.com/_/mongo)

Приложение состоит из двух частей: клиентской, которая запускается в браузере или на мобильном устройстве, и серверной (API-сервер).

### Запуск API-сервера

1. `cd /path/to/chat_api`
2. `pub get`
3. `dart bin/main.dart`

### Запуск web-клиента

1. `pub global activate webdev`
2. `cd /path/to/chat_web`
3. `pub get`
4. `webdev serve`

После этого приложение будет доступно на `localhost:8080`

### Запуск мобильного клиента

Описание появится после реализации мобильного клиента

## Материалы для изучения

* Базовая информация по языку Dart: https://www.dartlang.org/guides/language/language-tour
* Руководства по стилю, документированию, использованию и дизайну: https://www.dartlang.org/guides/language/effective-dart
* Документация по AngularDart: https://webdev.dartlang.org/angular/guide
* Галерея Angular компонентов: https://dart-lang.github.io/angular_components/
* Документация по Flutter: https://flutter.io/docs
* Каталог виджетов Flutter: https://flutter.io/docs/development/ui/widgets
* Базовая информация по тестированию: https://www.dartlang.org/guides/testing

## Структура приложения

Приложение состоит из пяти пакетов:

* `chat_api` - API-сервер
* `chat_web` - web-клиент
* `chat_mobile` - мобильный клиент
* `chat_api_client` - пакет предоставляет средства взаимодействия с API-сервером; используется в web- и мобильном клиентах
* `chat_models` - модели данных; используется во всех перечисленных выше пакетах

## Техническое задание на разработку

### Функциональные требования

1. Доработать стили и разметку интерфейсов для приведения их к приятному для глаза виду. Дизайнерские решения на усмотрение разработчика.
2. Разработать angular-компонент для красивого отображения сообщений чата. В качестве прообраза внешнего вида можно взять любой мессенджер или предложить свое решение.
3. Используя паттерн "Наблюдатель" изменить работу с web-сокетами таким образом, чтобы на данные передаваемые через web-сокет могли подписываться разные компоненты интерфейса. На основе данного функционала реализовать информирование пользователя о появлении новых сообщений в чатах пользователя. Способ информирования (значки, высплывающие сообщения и т.п.) предоставляется на усмотрение разработчика. В текущей версии сообщение полученное через web-сокет появляется только в активном чате, так как web-сокет соединение клиент устанавливает только при переходе в какой-либо чат. Компонент желательно сделать универсальным. Так, чтобы его можно было использовать как в мобильном приложении, так и в web-интерфейсе.
4. В текущей версии при появлении нового сообщения сервер отправляет это новое сообщение через web-сокет всем клиентам, установившим web-сокет соединение. При этом ответственность за то, выводить ли данное сообщение в текущем чате или нет возлагается на клиента. Такое поведение неверное. Необходимо доработать приложение так, чтобы на сервере фиксировалось соответствие пользователь - web-сокет, и сообщения через web-сокет отправлялось только заинтересованным пользователям.
5. Необходимо доработать приложение, чтобы чат мог иметь заголовок
6. При переходе к чату необходимо видеть его заголовок и участников
7. Сформулируйте самостоятельно какое-либо важное на Ваш взгляд функциональное требование и реализуйте его.

### Нефункциональные требования

1. В текущей версии не реализовано ни одного автоматического теста. Необходимо реализовать тесты для следующих компонентов приложения:
   1. Пакет `chat_api`: `ChatsCollection`, `ChatsResource`
   2. Пакет `chat_models`: `Chat`
   3. Пакет `chat_api_client`: `ChatsClient`
   4. Пакет `chat_web`: `ChatListComponent`
   5. Пакет `chat_mobile`:
2. Весь функционал написанный в ходе работы необходимо покрыть тестами
3. Весь код должен соответствовать рекомендациям, описанным в [руководствах](https://www.dartlang.org/guides/language/effective-dart)
4. Если в ходе работы будут выявлены ошибки, то их нужно исправить.
5. Если в ходе работы будет найдено более красивое решение, чем уже реализованное, то его нужно применить.
6. Последовательность реализации функциональных требований не важна.

## Отчет о проделанной работе

По результатам работы нужно составить краткий отчет. В отчет должно быть включено следующее:

* Что из предложенного задания удалось реализовать
* В чем возникли затруднения
* Если были сделаны доработки не указанные в ТЗ, то отметить какие.

Код с результатами работы необходимо выложить в любой публичный git-репозиторий и прислать ссылку на него.
 